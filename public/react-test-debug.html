<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="csrf-token" content="test-csrf-token">
    <title>React Reports Test (Debug)</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
    <div class="container mt-4">
        <h1>React Reports Component Test (Debug)</h1>
        <div id="react-reports-root"></div>
        
        <!-- Debug Info -->
        <div class="mt-4 p-3 bg-light">
            <h5>Debug Information:</h5>
            <div id="debug-info"></div>
        </div>
    </div>

    <!-- React 18 CDN -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    
    <!-- Built React component -->
    <script src="js/react-reports.js"></script>
    
    <script>
        // Debug: Check what's available
        const debugInfo = document.getElementById('debug-info');
        
        function logDebug(message) {
            console.log(message);
            debugInfo.innerHTML += '<div>' + message + '</div>';
        }
        
        logDebug('Page loaded');
        logDebug('React available: ' + (typeof React !== 'undefined'));
        logDebug('ReactDOM available: ' + (typeof ReactDOM !== 'undefined'));
        logDebug('ReactReports available: ' + (typeof window.ReactReports !== 'undefined'));
        
        if (window.ReactReports) {
            logDebug('ReactReports object keys: ' + Object.keys(window.ReactReports));
            logDebug('ReactReports.mountSimpleReports: ' + (typeof window.ReactReports.mountSimpleReports));
        }
        
        logDebug('Direct mountSimpleReports: ' + (typeof window.mountSimpleReports));
        
        // Wait a bit for scripts to load
        setTimeout(() => {
            logDebug('After timeout - ReactReports: ' + (typeof window.ReactReports !== 'undefined'));
            
            // Try multiple ways to mount
            if (window.ReactReports && window.ReactReports.mountSimpleReports) {
                logDebug('Mounting via ReactReports.mountSimpleReports...');
                try {
                    window.ReactReports.mountSimpleReports('react-reports-root');
                    logDebug('Component mounted successfully via ReactReports!');
                } catch (error) {
                    logDebug('Error mounting via ReactReports: ' + error.message);
                }
            } else if (window.mountSimpleReports) {
                logDebug('Mounting via direct window.mountSimpleReports...');
                try {
                    window.mountSimpleReports('react-reports-root');
                    logDebug('Component mounted successfully via direct method!');
                } catch (error) {
                    logDebug('Error mounting via direct method: ' + error.message);
                }
            } else {
                logDebug('React component not loaded');
                logDebug('Available window properties: ' + Object.keys(window).filter(k => k.includes('React') || k.includes('mount')).join(', '));
            }
        }, 1000);
    </script>
</body>
</html>
